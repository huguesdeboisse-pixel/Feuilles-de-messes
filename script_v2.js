document.addEventListener("DOMContentLoaded", () => { const btn = document.getElementById("computeBtn"); btn.addEventListener("click", async () => { const dateInput = document.getElementById("dateInput").value; const rite = document.getElementById("rite").value; if (!dateInput) { alert("Veuillez choisir une date."); return; } try { const result = await computeLiturgicalDay(dateInput, rite); displayResult(result); } catch (e) { console.error(e); alert("Erreur lors du calcul"); } }); }); function displayResult(res) { const block = document.getElementById("feteBlock"); block.classList.remove("hidden"); document.getElementById("feteTitle").textContent = res.primary ? res.primary.title : "Aucune fête trouvée"; document.getElementById("feteRank").textContent = res.primary?.rank || ""; document.getElementById("commemorations").textContent = res.commemorations?.length ? "Commémorations : " + res.commemorations.map(x => x.title).join(", ") : ""; }
